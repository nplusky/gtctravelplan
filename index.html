<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 GTC Planner - Full</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body class="bg-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const Icon = ({ name, className = "w-6 h-6" }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('itinerary');
            const [selectedDay, setSelectedDay] = useState(0);
            const [exploreTab, setExploreTab] = useState('attractions');
            const [isAdding, setIsAdding] = useState(false);
            
            // 初始行程數據
            const [itinerary, setItinerary] = useState([
                { date: '3/13', dayName: '五', events: [{ id: 1, time: '19:40', location: 'SFO Airport', note: '抵達並取車', type: 'transport' }]},
                { date: '3/14', dayName: '六', events: [
                    { id: 2, time: '09:30', location: 'Ferry Building', note: '農夫市集', type: 'food' },
                    { id: 10, time: '13:00', location: 'Alcatraz Island (惡魔島)', note: '需提前預約船票', type: 'sight' }
                ]},
                { date: '3/15', dayName: '日', events: [{ id: 4, time: '10:00', location: 'UC Berkeley', note: '校園參觀', type: 'sight' }]},
                { date: '3/16', dayName: '一', events: [{ id: 101, time: '09:00', location: 'San Jose Convention Center', note: '議程開始', type: 'work' }]},
                { date: '3/17', dayName: '二', events: [{ id: 102, time: '09:00', location: 'San Jose Convention Center', note: '議程持續', type: 'work' }]},
                { date: '3/18', dayName: '三', events: [{ id: 103, time: '09:00', location: 'San Jose Convention Center', note: '議程中', type: 'work' }]},
                { date: '3/19', dayName: '四', events: [{ id: 104, time: '09:00', location: 'San Jose Convention Center', note: '最後一天', type: 'work' }]},
                { date: '3/20', dayName: '五', events: [{ id: 6, time: '12:00', location: 'SFO Airport', note: '還車搭機', type: 'transport' }]}
            ]);

            // 完整探索清單
            const attractions = [
                { en: "Alcatraz Island", zh: "惡魔島", city: "San Francisco", tag: "culture", desc: "歷史悠久的聯邦監獄，需搭船前往" },
                { en: "Golden Gate Bridge", zh: "金門大橋", city: "San Francisco", tag: "popular", desc: "舊金山最代表性地標" },
                { en: "PIER 39", zh: "39號碼頭", city: "San Francisco", tag: "popular", desc: "看海獅、逛街與美食" },
                { en: "Lombard Street", zh: "九曲花街", city: "San Francisco", tag: "popular", desc: "世界最彎曲迷人街道" },
                { en: "Santana Row", zh: "桑塔納行", city: "San Jose", tag: "popular", desc: "高級露天購物商圈" },
                { en: "Sausalito", zh: "莎莎利托", city: "North Bay", tag: "nature", desc: "充滿地中海風情的海濱小鎮" },
                { en: "Muir Woods", zh: "穆爾紅木林", city: "North Bay", tag: "nature", desc: "壯觀的巨型紅木森林步道" },
                { en: "Stanford University", zh: "史丹佛大學", city: "Palo Alto", tag: "culture", desc: "矽谷頂尖學府，校園極美" }
            ].sort((a, b) => a.en.localeCompare(b.en));

            const restaurants = [
                { en: "The Coffee Movement", zh: "咖啡運動", city: "San Francisco", tag: "cafe", desc: "在地超高評價精品咖啡" },
                { en: "Arsicault Bakery", zh: "知名烘培店", city: "San Francisco", tag: "cafe", desc: "全美公認最佳可頌" },
                { en: "Fog Harbor Fish House", zh: "碼頭海鮮餐廳", city: "San Francisco", tag: "restaurant", desc: "漁人碼頭海鮮首選" },
                { en: "In-N-Out Burger", zh: "經典漢堡", city: "Bay Area", tag: "popular", desc: "加州必吃的傳奇漢堡店" },
                { en: "Tartine Bakery", zh: "知名麵包坊", city: "San Francisco", tag: "cafe", desc: "著名的酸種麵包與甜點" },
                { en: "Philz Coffee", zh: "薄荷咖啡", city: "Bay Area", tag: "cafe", desc: "獨特的 Mint Mojito 必點" }
            ].sort((a, b) => a.en.localeCompare(b.en));

            const addEvent = (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const newEvent = {
                    id: Date.now(),
                    time: formData.get('time'),
                    location: formData.get('location'),
                    note: formData.get('note'),
                    type: 'manual'
                };
                
                const updatedItinerary = [...itinerary];
                updatedItinerary[selectedDay].events.push(newEvent);
                // 按時間排序
                updatedItinerary[selectedDay].events.sort((a, b) => a.time.localeCompare(b.time));
                setItinerary(updatedItinerary);
                setIsAdding(false);
            };

            const getTagStyle = (tag) => {
                switch(tag) {
                    case 'popular': return { bg: 'bg-rose-50', text: 'text-rose-600', icon: 'star', label: '人氣' };
                    case 'nature': return { bg: 'bg-emerald-50', text: 'text-emerald-600', icon: 'leaf', label: '自然' };
                    case 'culture': return { bg: 'bg-indigo-50', text: 'text-indigo-600', icon: 'landmark', label: '文化' };
                    case 'cafe': return { bg: 'bg-orange-50', text: 'text-orange-600', icon: 'coffee', label: '咖啡' };
                    default: return { bg: 'bg-blue-50', text: 'text-blue-600', icon: 'utensils', label: '餐廳' };
                }
            };

            const openGoogleMaps = (name, city = "") => {
                const query = city ? `${name} ${city}` : name;
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank');
            };

            const currentDayData = itinerary[selectedDay];

            return (
                <div className="flex flex-col h-screen bg-slate-50 text-slate-900 max-w-md mx-auto shadow-2xl overflow-hidden border-x border-slate-200 relative">
                    <header className="px-6 pt-10 pb-4 bg-white border-b border-slate-100 sticky top-0 z-40">
                        <div className="flex justify-between items-start">
                            <h1 className="text-2xl font-black text-blue-600 uppercase tracking-tighter italic">2026 GTC</h1>
                            <button onClick={() => setIsAdding(true)} className="p-2 bg-blue-50 text-blue-600 rounded-xl active:scale-95 transition-transform">
                                <Icon name="plus" className="w-5 h-5" />
                            </button>
                        </div>
                    </header>

                    <main className="flex-1 overflow-y-auto pb-28 no-scrollbar">
                        {activeTab === 'itinerary' && (
                            <div className="p-6">
                                <div className="flex gap-2 mb-6 overflow-x-auto no-scrollbar pb-2">
                                    {itinerary.map((day, idx) => (
                                        <button 
                                            key={idx} 
                                            onClick={() => setSelectedDay(idx)}
                                            className={`flex-shrink-0 px-4 py-3 rounded-2xl flex flex-col items-center min-w-[60px] transition-all ${selectedDay === idx ? 'bg-blue-600 text-white shadow-lg' : 'bg-white text-slate-400 border border-slate-100'}`}
                                        >
                                            <span className="text-[10px] font-bold uppercase">{day.dayName}</span>
                                            <span className="text-sm font-black">{day.date.split('/')[1]}</span>
                                        </button>
                                    ))}
                                </div>
                                <h2 className="text-xl font-black uppercase tracking-tight text-slate-800 mb-6 flex justify-between items-center">
                                    <span>{currentDayData.date} {currentDayData.dayName}</span>
                                    <span className="text-[10px] text-slate-400 bg-slate-100 px-2 py-1 rounded-md">{currentDayData.events.length} EVENTS</span>
                                </h2>
                                <div className="space-y-4">
                                    {currentDayData.events.map((event) => (
                                        <div key={event.id} className="bg-white p-5 rounded-[2rem] shadow-sm border border-slate-100 group relative">
                                            <div className="text-xs font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded-lg inline-block mb-3">{event.time}</div>
                                            <div className="font-black text-slate-800 block mb-1">{event.location}</div>
                                            <p className="text-[10px] text-slate-400 italic leading-relaxed">{event.note}</p>
                                            <button onClick={() => openGoogleMaps(event.location)} className="w-full mt-4 bg-slate-50 py-2.5 rounded-xl text-[10px] font-black text-slate-400 flex items-center justify-center gap-2 hover:bg-slate-100 transition-colors">
                                                <Icon name="navigation" className="w-3 h-3"/> GOOGLE MAPS
                                            </button>
                                        </div>
                                    ))}
                                    {currentDayData.events.length === 0 && (
                                        <div className="text-center py-20 text-slate-300 italic font-medium">今天還沒有行程...</div>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'explore' && (
                            <div className="p-6 space-y-4">
                                <div className="flex bg-slate-200/50 p-1 rounded-2xl mb-6">
                                    <button onClick={() => setExploreTab('attractions')} className={`flex-1 py-3 rounded-xl text-xs font-black transition-all ${exploreTab === 'attractions' ? 'bg-white shadow-sm text-blue-600' : 'text-slate-400'}`}>SIGHTS</button>
                                    <button onClick={() => setExploreTab('food')} className={`flex-1 py-3 rounded-xl text-xs font-black transition-all ${exploreTab === 'food' ? 'bg-white shadow-sm text-blue-600' : 'text-slate-400'}`}>EATS</button>
                                </div>
                                {(exploreTab === 'attractions' ? attractions : restaurants).map((item, idx) => {
                                    const tag = getTagStyle(item.tag);
                                    return (
                                        <div key={idx} className="bg-white p-5 rounded-[2rem] shadow-sm border border-slate-100">
                                            <div className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full mb-2 ${tag.bg} ${tag.text}`}>
                                                <Icon name={tag.icon} className="w-3 h-3" />
                                                <span className="text-[10px] font-black uppercase">{tag.label}</span>
                                            </div>
                                            <h3 className="font-black text-slate-800 text-lg">{item.en}</h3>
                                            <p className="text-[10px] font-bold text-slate-400 mb-2">{item.zh} · {item.city}</p>
                                            <p className="text-xs text-slate-500 leading-relaxed bg-slate-50 p-3 rounded-2xl mb-3">{item.desc}</p>
                                            <button onClick={() => openGoogleMaps(item.en, item.city)} className="w-full bg-slate-50 py-3 rounded-xl text-[10px] font-black text-slate-400 flex items-center justify-center gap-2 border border-slate-100 hover:bg-white transition-colors">
                                                <Icon name="navigation" className="w-3 h-3"/> 在地圖上查看
                                            </button>
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                        {activeTab === 'map' && (
                            <div className="h-full flex flex-col items-center justify-center text-center p-10">
                                <div className="w-20 h-20 bg-blue-50 rounded-full flex items-center justify-center mb-6">
                                    <Icon name="map" className="w-10 h-10 text-blue-500" />
                                </div>
                                <h2 className="text-2xl font-black mb-4 uppercase tracking-tighter italic text-blue-600">地圖導覽</h2>
                                <p className="text-sm text-slate-400 mb-8 leading-relaxed px-4">前往 Google Maps 查看<br/>舊金山與聖荷西的景點分佈。</p>
                                <button 
                                    onClick={() => window.open('https://www.google.com/maps/search/San+Francisco+and+San+Jose+Attractions', '_blank')}
                                    className="w-full bg-blue-600 text-white py-4 rounded-3xl font-black text-sm shadow-xl flex items-center justify-center gap-3 active:scale-95 transition-transform"
                                >
                                    <Icon name="globe" className="w-5 h-5" /> OPEN GOOGLE MAPS
                                </button>
                            </div>
                        )}
                    </main>

                    {/* 新增行程彈窗 */}
                    {isAdding && (
                        <div className="fixed inset-0 z-[60] flex items-end justify-center px-4 pb-10">
                            <div className="absolute inset-0 bg-slate-900/40 backdrop-blur-sm" onClick={() => setIsAdding(false)}></div>
                            <form onSubmit={addEvent} className="relative w-full max-w-sm bg-white rounded-[3rem] p-8 shadow-2xl animate-in slide-in-from-bottom duration-300">
                                <h3 className="text-xl font-black mb-6 text-slate-800 uppercase">ADD NEW EVENT</h3>
                                <div className="space-y-4 mb-8">
                                    <div>
                                        <label className="text-[10px] font-black text-slate-400 uppercase mb-2 block">TIME</label>
                                        <input required name="time" type="time" className="w-full bg-slate-50 border-none rounded-2xl px-4 py-3 font-bold text-slate-700" />
                                    </div>
                                    <div>
                                        <label className="text-[10px] font-black text-slate-400 uppercase mb-2 block">LOCATION</label>
                                        <input required name="location" type="text" placeholder="e.g. Apple Park" className="w-full bg-slate-50 border-none rounded-2xl px-4 py-3 font-bold text-slate-700 placeholder:text-slate-300" />
                                    </div>
                                    <div>
                                        <label className="text-[10px] font-black text-slate-400 uppercase mb-2 block">NOTES</label>
                                        <textarea name="note" placeholder="Optional details..." className="w-full bg-slate-50 border-none rounded-2xl px-4 py-3 font-bold text-slate-700 h-24 resize-none placeholder:text-slate-300"></textarea>
                                    </div>
                                </div>
                                <div className="flex gap-3">
                                    <button type="button" onClick={() => setIsAdding(false)} className="flex-1 py-4 bg-slate-100 text-slate-400 rounded-2xl font-black text-xs uppercase tracking-widest">Cancel</button>
                                    <button type="submit" className="flex-[2] py-4 bg-blue-600 text-white rounded-2xl font-black text-xs uppercase tracking-widest shadow-lg shadow-blue-200">Save Event</button>
                                </div>
                            </form>
                        </div>
                    )}

                    <nav className="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/95 backdrop-blur-xl border-t border-slate-100 px-8 py-5 flex justify-between rounded-t-[2.5rem] shadow-2xl z-50 safe-bottom">
                        <button onClick={() => setActiveTab('itinerary')} className={`flex flex-col items-center gap-1 transition-all ${activeTab === 'itinerary' ? 'text-blue-600 scale-110' : 'text-slate-300'}`}>
                            <Icon name="calendar" /><span className="text-[8px] font-black uppercase tracking-widest">行程</span>
                        </button>
                        <button onClick={() => setActiveTab('explore')} className={`flex flex-col items-center gap-1 transition-all ${activeTab === 'explore' ? 'text-blue-600 scale-110' : 'text-slate-300'}`}>
                            <Icon name="search" /><span className="text-[8px] font-black uppercase tracking-widest">探索</span>
                        </button>
                        <button onClick={() => setActiveTab('map')} className={`flex flex-col items-center gap-1 transition-all ${activeTab === 'map' ? 'text-blue-600 scale-110' : 'text-slate-300'}`}>
                            <Icon name="map" /><span className="text-[8px] font-black uppercase tracking-widest">地圖</span>
                        </button>
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
